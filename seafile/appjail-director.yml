options:
  - virtualnet: 'ajnet:seafile default'
  - mount_devfs:

services:
  seafile:
    makejail: Makejail
    name: seafile
    options:
      - nat:
      - expose: 8000
      - expose: 8081
    arguments:
      - seafile_tag: 14.1
    environment:
      - SEAFILE_MYSQL_PASS: !ENV '${SEAFILE_MYSQL_PASS}'
      - SEAFILE_DOMAIN: !ENV '${SEAFILE_DOMAIN}'
      - SEAFILE_PASS: !ENV '${SEAFILE_PASS}'
    volumes:
      - seafile-root: seafile-root
      - mysql: mysql

volumes:
  seafile-root: 
    device: /data/jails/seafile/seafile
    type: <volumefs>
  mysql:
    device: /data/jails/seafile/mysql
    type: <volumefs>
  
