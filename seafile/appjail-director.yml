options:
  - virtualnet: 'ajnet:seafile default'
  - mount_devfs:

services:
  seafile:
    makejail: Makejail
    name: seafile
    options:
      - nat:
      - expose: 8000
      - expose: 8081

    arguments:
      - seafile_tag: 14.1
    environment:
      - SEAFILE_MYSQL_PASS: !ENV '${SEAFILE_MYSQL_PASS}'
      - SEAFILE_DOMAIN: !ENV '${SEAFILE_DOMAIN}'
      - SEAFILE_PASS: !ENV '${SEAFILE_PASS}'
    volumes:
      - mysql: mysql
      - seafile-ccnet: seafile-ccnet
      - seafile-conf: seafile-conf
      - seafile-logs: seafile-logs
      - seafile-pids: seafile-pids
      - seafile-data: seafile-data
      - seahub-data: seahub-data

volumes:
  mysql:
    device: /data/jails/seafile/mysql
    type: <volumefs>
  seafile-ccnet:
    device: /data/jails/seafile/ccnet
    type: <volumefs>
  seafile-conf:
    device: /data/jails/seafile/conf
    type: <volumefs>
  seafile-logs:
    device: /data/jails/seafile/logs
    type: <volumefs>
  seafile-pids:
    device: /data/jails/seafile/pids
    type: <volumefs>
  seafile-data:
    device: /data/jails/seafile/data
    type: <volumefs>
  seahub-data:
    device: /data/jails/seafile/seahub-data
    type: <volumefs>
  
